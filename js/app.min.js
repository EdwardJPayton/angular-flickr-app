!function(e){"use strict";e.module("FlickrApp",["FlickrController","FlickrService"]),e.module("FlickrController",["ngRoute"]).controller("MainController",["$scope","$http","$route","ItemDetail",function(e,t,r,n){var o="http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=JSON_CALLBACK&tagmode=all&format=json";e.images={},e.searching=!1,e.search=function(r){e.searching=!0,o=o+"&tags="+encodeURIComponent(e.searchCriteria.tags),t.jsonp(o).success(function(t,r,n,o){e.images=t,e.searching=!1}).error(function(t,r,n,o){console.log("error"),e.searching=!1}),e.form.tags.$setValidity()},e.init=function(){o+="&tags=potato",t.jsonp(o).success(function(t){e.images=t}).error(function(e){console.log("error")})},e.init(),e.myDate=function(e){function t(e){var t="";switch(e>3&&21>e&&(t="th"),e%10){case 1:t="st";case 2:t="nd";case 3:t="rd";default:t="th"}return e+t}var e=new Date(e),r=e.getFullYear(),n=e.getMonth(),o=e.getDate(),a=e.getHours(),i=e.getMinutes(),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];10>i&&(i="0"+i);var l=t(o)+" "+c[n]+" "+r+" at "+a+":"+i;return l},e.imageRoute=function(e){var t=e.link,r=t.replace("http://www.flickr.com","");return r},e.openDetail=function(e){n.setItem(e)}}]).controller("DetailController",["$scope","$routeParams","$sce","ItemDetail",function(t,r,n,o){function a(e){var t=document.createElement("div");t.innerHTML=e;var r=t.getElementsByTagName("p");return r[2]?(r=r[2].outerHTML,r=r.replace(/<\/?[^>]+>/gi,"")):r="No description available",r}t.title="Detail page";var i=o.getItem();t.item=i,t.myTags=[],e.forEach(i.tags.split(" "),function(e){t.myTags.push(e)}),t.myDate=function(e){function t(e){var t="";switch(e>3&&21>e&&(t="th"),e%10){case 1:t="st";case 2:t="nd";case 3:t="rd";default:t="th"}return e+t}var e=new Date(e),r=e.getFullYear(),n=e.getMonth(),o=e.getDate(),a=e.getHours(),i=e.getMinutes(),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];10>i&&(i="0"+i);var l=t(o)+" "+c[n]+" "+r+" at "+a+":"+i;return l},t.myDescription=a(i.description)}]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"templates/list.html",controller:"MainController"}).when("/photos/:authorId/:photoId",{templateUrl:"templates/detail.html",controller:"DetailController"}),t.html5Mode(!0)}]),e.module("FlickrService",[]).factory("ItemDetail",function(){var e={};return{setItem:function(t){e=t},getItem:function(){return e}}})}(window.angular);
